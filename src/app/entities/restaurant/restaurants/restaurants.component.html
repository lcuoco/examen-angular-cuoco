<div class="row">
  <div class="col-4" *ngFor="let restaurant of restaurants">
    <mat-card class="example-card card-restaurant" [ngClass]="this.getAvg(restaurant)<1 ? 'card-grey' : 'card-yellow'">
      <mat-card-header>
        <div mat-card-avatar class="example-header-image"></div>
        <mat-card-title>{{restaurant.nom}}</mat-card-title>
        <mat-card-subtitle class="card-sub">{{restaurant.adresse}}</mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <mat-accordion *ngIf="restaurant.evaluations.length > 0">
          <mat-expansion-panel hideToggle *ngIf="restaurant.evaluations.length > 0">
            <mat-expansion-panel-header>
              <mat-panel-title>
                Voir les evaluations
              </mat-panel-title>
              <mat-panel-description>
                Moyenne : {{this.getAvg(restaurant)}}
              </mat-panel-description>
            </mat-expansion-panel-header>
            <p *ngFor="let evaluation of this.restaurant.evaluations">{{evaluation.evaluateur}} | {{evaluation.commentaire}} | <span *ngFor="let a of parseNumber(evaluation.etoiles)"><fa-icon [icon]="faStar"></fa-icon></span></p>
          </mat-expansion-panel>
        </mat-accordion>
        <div *ngIf="restaurant.evaluations.length  === 0" class="text-center">
          Aucune évaluations pour l'instant
        </div>
      </mat-card-content>
      <mat-card-actions>
        <button class="btn btn-outline-secondary" type="button" [routerLink]="['detail/', restaurant.id]">Détails</button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
